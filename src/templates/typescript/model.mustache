// This file is generated by model file generator.
// Please do NOT edit.

{{#fields}}
{{#importFilePath}}
import {{type}} from "{{{importFilePath}}}"
{{/importFilePath}}
{{/fields}}
{{#hasUuid}}
import isUuid from "validator/es/lib/isUuid"
{{/hasUuid}}
{{#hasEmail}}
import isEmail from "validator/es/lib/isEmail"
{{/hasEmail}}
{{#hasUrl}}
import isUrl from "validator/es/lib/isUrl"
{{/hasUrl}}

export class UnexpectedNullError extends Error {
  constructor () {
    super("{{class}} UnexpectedNullError: If you see this, ModelGun validation may be broken.")
  }
}

export class InvalidPropertyError extends Error {
  constructor (message: string) {
    super("{{class}} UnexpectedNullError: " + message)
  }
}

export default class {{class}} {
  {{#fields}}
  #{{name}}: {{type}} | null = null
  {{/fields}}

  constructor (
  {{#fields}}
    {{name}}: {{type}},
  {{/fields}}
  ) {
  {{#fields}}
    this.{{setterName}}({{name}})
  {{/fields}}
  }
  {{#fields}}

  {{getterName}} (): {{type}} {
    if (this.#{{name}} === null) {
      throw new UnexpectedNullError()
    }
    return this.#{{name}}
  }

  {{setterName}} (value: {{type}}) {
    {{#isUuid}}
    if (!isUuid(value)) {
      throw new InvalidPropertyError()
    }
    {{/isUuid}}
    {{#isEmail}}
    if (!isEmail(value)) {
      throw new InvalidPropertyError()
    }
    {{/isEmail}}
    {{#isUrl}}
    if (!isUrl(value)) {
      throw new InvalidPropertyError()
    }
    {{/isUrl}}
    {{#minLength}}
    if (value.length < {{minLength}}) {
      throw new InvalidPropertyError()
    }
    {{/minLength}}
    {{#maxLength}}
    if (value.length > {{maxLength}}) {
      throw new InvalidPropertyError()
    }
    {{/maxLength}}
    {{#regex}}
    if (!/{{regex}}/.test(value)) {
      throw new InvalidPropertyError()
    }
    {{/regex}}
    {{#max}}
    if (value > {{max}}) {
      throw new InvalidPropertyError()
    }
    {{/max}}
    {{#min}}
    if (value < {{min}}) {
      throw new InvalidPropertyError()
    }
    {{/min}}
    this.#{{name}} = value
  }
  {{/fields}}
}
